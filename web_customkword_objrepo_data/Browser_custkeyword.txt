*** Keywords ***
Open_chrome
    [Arguments]    ${URL}
    [Documentation]    Opens _Google Chrome_ to a given web page, without any user profile.
    ...    For more information on what capabilities that _Google Chrome_
    ...    supports, see [https://sites.google.com/a/chromium.org/chromedriver/capabilities%7Cthis Capabilities & ChromeOptions page].
    ${chrome_options}=    Evaluate    sys.modules['selenium.webdriver'].ChromeOptions()    sys
    Call Method    ${chrome_options}    add_argument    test-type
    Call Method    ${chrome_options}    add_argument    --disable-extensions
    Call Method    ${chrome_options}    add_argument    --disable-notifications
    Call Method    ${chrome_options}    add_argument    --disable-infobars
    Run Keyword If    os.sep == '/'    SeleniumLibrary.Create Webdriver    Chrome    my_alias    chrome_options=${chrome_options}
    ...    ELSE    SeleniumLibrary.Create Webdriver    Chrome    my_alias    chrome_options=${chrome_options}    #executable_path=/usr/lib/chromium-browser/chromedriver
    ${width}    ${height}=    SeleniumLibrary.Get Window Size
    SeleniumLibrary.Set Window Size    ${width}    ${height}
    SeleniumLibrary.Go To    ${URL}
    Set Suite Variable    ${last_opened_URL}    ${URL}

Open_chrome_with_user_profile
    [Arguments]    ${URL}
    [Documentation]    Opens _Google Chrome_ with saved user profile.
    ...    For more information on what capabilities that _Google Chrome_
    ...    supports, see [https://sites.google.com/a/chromium.org/chromedriver/capabilities%7Cthis Capabilities & ChromeOptions page].
    ${chrome_options}=    Evaluate    sys.modules['selenium.webdriver'].ChromeOptions()    sys
    Call Method    ${chrome_options}    add_argument    test-type
    Call Method    ${chrome_options}    add_argument    --disable-extensions
    Call Method    ${chrome_options}    add_argument    --disable-notifications
    Call Method    ${chrome_options}    add_argument    --disable-infobars
    Call Method    ${chrome_options}    add_argument    ${user-data-dir}
    Call Method    ${chrome_options}    add_argument    ${profile-dir}
    Run Keyword If    os.sep == '/'    SeleniumLibrary.Create Webdriver    Chrome    my_alias    chrome_options=${chrome_options}
    ...    ELSE    SeleniumLibrary.Create Webdriver    Chrome    my_alias    chrome_options=${chrome_options}    #executable_path=/usr/lib/chromium-browser/chromedriver
    ${width}    ${height}=    SeleniumLibrary.Get Window Size
    SeleniumLibrary.Set Window Size    ${width}    ${height}
    SeleniumLibrary.Go To    ${URL}
    Set Suite Variable    ${last_opened_URL}    ${URL}

Check_opened_URL
    [Arguments]    ${c_button}
    Sleep    10s
    ${URLS}    SeleniumLibrary.Get Locations
    ${window_opens}    Get Length    ${URLS}
    ${window_opens_new}    Evaluate    ${window_opens}-1
    ${URL_now}    Get Location
    Select Window    url=${URLmessengerTSEL}
    ${last_url}    Get From List    ${URLS}    ${window_opens_new}
    ${last_url_string}    Convert To String    ${last_url}
    ${last_opened_URL_string}    Convert To String    ${last_opened_URL}
    ${URL_compare}    Run Keyword And Return Status    Should Be Equal As Strings    ${last_url_string}    ${last_opened_URL_string}
    Run Keyword If    ${URL_compare}    Run Keywords    Set Suite Variable    ${current_user_input}    ${c_button}
    ...    AND    Count_message_bubble_user_input    ${current_user_input}
    ...    AND    SeleniumLibrary.Capture Page Screenshot    input_${current_user_input}_${TEST NAME}.png
    Set Suite Variable    ${last_opened_URL}    ${last_url}
